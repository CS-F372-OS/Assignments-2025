
tests/%.output: FILESYSSOURCE = --filesys-size=8
tests/%.output: PUTFILES = $(filter-out kernel.bin loader.bin, $^)

tests/shell/shell: ../../examples/shell
	cp $< $@

tests/shell/echo: ../../examples/echo
	cp $< $@

tests/shell/echo-none_PUTFILES += tests/shell/shell tests/shell/echo
tests/shell/echo-multi_PUTFILES += tests/shell/shell tests/shell/echo


tests/shell/echo-white_PUTFILES += tests/shell/shell tests/shell/echo
tests/shell/echo-mixed_PUTFILES += tests/shell/shell tests/shell/echo
tests/shell/echo-newlines_PUTFILES += tests/shell/shell tests/shell/echo
tests/shell/echo-dashes_PUTFILES += tests/shell/shell tests/shell/echo

tests/shell_TESTS = $(addprefix tests/shell/, echo-none echo-multi echo-white echo-mixed echo-newlines echo-dashes)

tests/shell/echo-none_SRC = tests/shell/echo-none.c
tests/shell/echo-none: tests/shell/shell tests/shell/echo

tests/shell/echo-multi_SRC = tests/shell/echo-multi.c
tests/shell/echo-multi: tests/shell/shell tests/shell/echo





tests/shell/echo-white_SRC = tests/shell/echo-white.c
tests/shell/echo-white: tests/shell/shell tests/shell/echo

tests/shell/echo-mixed_SRC = tests/shell/echo-mixed.c
tests/shell/echo-mixed: tests/shell/shell tests/shell/echo

tests/shell/echo-newlines_SRC = tests/shell/echo-newlines.c
tests/shell/echo-newlines: tests/shell/shell tests/shell/echo

tests/shell/echo-dashes_SRC = tests/shell/echo-dashes.c
tests/shell/echo-dashes: tests/shell/shell tests/shell/echo

tests/shell_PROGS = $(tests/shell_TESTS)

$(foreach prog,$(tests/shell_PROGS),$(eval $(prog)_SRC += tests/lib.c))

